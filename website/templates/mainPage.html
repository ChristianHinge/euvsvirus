{% extends 'base.html' %}
{% load static %} 
{% load plotly_dash %}

{% block body %}
<!-- Header -->
    <header id="header" class='getScrolled'>
        <!-- <div class="{% plotly_class name='SimpleExample' %} card" style="height: 100%; width: 100%" id="usaPlot">
            {% plotly_app name='SimpleExample' ratio=1 %}
        </div> -->
        <div class="content">
            <div id="front">
                <img src="{% static 'website/images/WHET_LogoWithText_Short_Vector_WHITE_v0.1.svg' %}" alt="" >
                <p>Making information accessible.</p>
            </div>
        </div>
    </header>

<!-- White section -->
    <section class='HowToText'>
        <div class="titleTextDetails">
            <h2>
                How to use
            </h2>
        </div>
        <div class="details">
            <p>
                US county data has been curated and processed to showcase the tool. 
                You can interact with the data through the interactive map below, 
                simply select a county by clicking to analyze them. Select different 
                risk metrics with the dropdown menu above the map to change the map 
                visualization. Values are plotted for the selected counties underneath.
                Press "Full lockdown", "Partial lockdown", or "Panic dynamics" to reveal 
                a slider for each. Move nodes of the sliders to control the start and 
                end time for each effect. The plot will automatically update to reflect the changes.
            </p>
            <br>
        </div>
    </section>


<!-- Plot Section -->
    <section id="one">
        <div class="{% plotly_class name='SimpleExample' %} card" style="height: 100%; width: 100%" id="usaPlot">
            {% plotly_direct  name='SimpleExample' %}
        </div>
        <br>

    </section>


<!-- White section -->
    <section>
        <div class='HowToText'>
            <div class="titleTextDetails">
                <h2>
                    Details
                </h2>
            </div>
            <div class="details">
                <p>
                    The heatmap displayed on the map indicates the risks a county would be exposed 
                    to in case of an outbreak. More precisely, a single infected indivual at day 0. 
		    The simulations are imagined as a future scenario where a county is hit by a fresh outbreak, 
		    which means that Removed at day 0 is estimated from current (April 24th 2020) fatality counts.
		    This means it does not visualize the probability of 
                    an outbreak but rather the ramifications of one occurring. The risks are measured 
                    from data on peak ICU bed requirements, peak ICU beds per available ICU beds, 
                    total fatalities, and fatalities per capita all based on a 500-day simulation 
                    without a lockdown. The default heatmap displays an overall risk index, which is 
                    the product of peak ICU versus available ICU beds and fatalities per capita. The 
                    simulation is built on an SEIR model with parameters currently estimated from 
                    population size, age distribution, and other factors. 
		    Fatality rates are estimated from age specific fatality rates, age distributions for each county, 
		    contribution from prior health issues, and health data for each county.
		    ICU numbers are currently 
                    found from a simple model of each fatality having a 5 day ICU stay preceding it.
                </p><p>
                    Data for the selected county is displayed under the map, followed by a visualization 
                    of simulation progression through time. Sliders activated with the buttons "Full lockdown", 
                    "Partial lockdown", and "Panic dynamics" allows for playing around with the dynamics 
                    of introducing a lockdown, partial lockdown, and population panics for time intervals 
                    selected from the end points of each slider. All dynamics are modelled as temporary 
                    changes to the beta parameter of a SEIR model. A lockdown is modelled to match a reduction 
                    of r0 from approximately 2 to &lt;1, partial lockdown is to &gt;1, and panic is approximately 
                    3, although it varies by county. Overlapping dynamics will result in averaged effects.
                </p>
                
                <div id='youtubediv'>
                <a id="youtubelink" href="https://www.youtube.com/watch?v=DTJHzcXAQE0&t=2s">Youtube Demo</a>
                </div>
                <br>


                <div class="titleTextDetails">
                    <h1>
                        Sources:
                    </h1>
                </div>
		    <a href="https://www.census.gov/data/datasets/time-series/demo/popest/2010s-counties-total.html">https://www.census.gov/data/datasets/time-series/demo/popest/2010s-counties-total.html</a> <br />
		    <a href="https://www.kaggle.com/roche-data-science-coalition/uncover">https://www.kaggle.com/roche-data-science-coalition/uncover</a> <br />
		    <a href="https://data.humdata.org/dataset/nyt-covid-19-data">https://data.humdata.org/dataset/nyt-covid-19-data</a> <br />
		    <a href="https://github.com/CSSEGISandData/COVID-19">https://github.com/CSSEGISandData/COVID-19</a> <br />
                <br>
            </div>
        </div>
    </section>


    <!-- second gradient section -->
    <!-- <section id="header2">
        <div class="content">
            <img id="logoTop" src="{% static "website/images/WHET_Logo_ClearBackground_75_v0.1.png" %}" alt="">
            <p>This is where we can put some kewl text</p>
        </div>
    </section>            -->

<!-- Footer -->
    <footer id="footer">
	    <p class="copyright">Built on fractal template from <a href="http://html5up.net">HTML5 UP</a></p>
    </footer>
        <!-- Scripts -->
        {% load static %}
        <script src={% static 'website/js/jquery.min.js' %}></script>
        <script src={% static 'website/js//jquery.scrolly.min.js' %}></script>
        <script src={% static 'website/js/browser.min.js' %}></script>
        <script src={% static 'website/js/breakpoints.min.js' %}></script>
        <script src={% static 'website/js/util.js' %}></script>
        <script src={% static 'website/js/main.js' %}></script>
{% endblock %}
